================================================================================
                        Netlify 部署教學 - AI 聊天助手
================================================================================

本專案使用 Netlify Functions (Python) 來執行後端 API，
前端是純 HTML/JS，不需要 Node.js 建置。

--------------------------------------------------------------------------------
方法一：使用 Netlify CLI（命令列）部署
--------------------------------------------------------------------------------

【步驟 1】安裝 Netlify CLI

    npm install -g netlify-cli

    說明：這會在你的電腦全域安裝 Netlify 命令列工具
    前提：需要先安裝 Node.js (https://nodejs.org/)
    驗證安裝：執行 netlify --version 應該會顯示版本號

--------------------------------------------------------------------------------

【步驟 2】登入 Netlify 帳號

    netlify login

    說明：執行後會自動開啟瀏覽器，讓你登入 Netlify 帳號
    如果沒有帳號：請先到 https://app.netlify.com/ 註冊（可用 GitHub 登入）

--------------------------------------------------------------------------------

【步驟 3】進入專案資料夾

    cd 你的專案路徑

    例如：cd D:\Flask-AI-API-Tutorial-master\.6_雲端部署準備\netlify

--------------------------------------------------------------------------------

【步驟 4】初始化 Netlify 專案

    netlify init

    執行後會出現選單，請選擇：

    ? What would you like to do?
    > Create & configure a new site    ← 選這個（建立新網站）

    ? Team:
    > 選擇你的團隊（通常只有一個）

    ? Site name (optional):
    > 輸入你想要的網站名稱，例如：my-ai-chat
      最終網址會是：https://my-ai-chat.netlify.app
      （留空會自動產生隨機名稱）

--------------------------------------------------------------------------------

【步驟 5】設定環境變數（重要！）

    本專案支援 OpenAI 和 Google Gemini 兩種 AI，需要設定對應的 API Key。

    ▼ 設定 OpenAI API Key：

    netlify env:set OPENAI_API_KEY "你的OpenAI金鑰"

    取得 OpenAI API Key：
    1. 前往 https://platform.openai.com/api-keys
    2. 點擊「Create new secret key」
    3. 複製金鑰（只會顯示一次！）
    注意：金鑰格式通常是 sk-proj-xxxxx 或 sk-xxxxx

    ▼ 設定 Google API Key：

    netlify env:set GOOGLE_API_KEY "你的Google金鑰"

    取得 Google API Key：
    1. 前往 https://aistudio.google.com/app/apikey
    2. 點擊「Create API Key」
    3. 選擇或建立一個 Google Cloud 專案
    4. 複製產生的金鑰

    注意：兩個 API Key 都要設定，才能在前端自由切換 AI 模型

--------------------------------------------------------------------------------

【步驟 6】測試部署（產生預覽網址）

    netlify deploy

    說明：這會部署到一個臨時的預覽網址，讓你測試功能是否正常
    成功後會顯示類似：

    ✔ Deploy is live!
    Website Draft URL: https://xxx-preview-xxx.netlify.app

    請打開這個網址測試聊天功能是否正常運作

--------------------------------------------------------------------------------

【步驟 7】正式部署（上線！）

    netlify deploy --prod

    說明：確認測試沒問題後，執行這個指令正式上線
    成功後會顯示：

    ✔ Deploy is live!
    Website URL: https://你的網站名稱.netlify.app

    這就是你的正式網址了！

================================================================================
方法二：使用 Netlify 網頁後台部署（不需安裝 CLI）
================================================================================

【步驟 1】將專案上傳到 GitHub

    1. 在 GitHub 建立新的 Repository
    2. 把這個 netlify 資料夾的內容推上去

--------------------------------------------------------------------------------

【步驟 2】連結 GitHub 到 Netlify

    1. 前往 https://app.netlify.com/
    2. 點擊「Add new site」→「Import an existing project」
    3. 選擇「Deploy with GitHub」
    4. 授權並選擇你的 Repository

--------------------------------------------------------------------------------

【步驟 3】設定部署選項

    Build settings 頁面：
    - Base directory: （留空，或填入子資料夾路徑）
    - Build command: （留空，本專案不需要建置）
    - Publish directory: .
    - Functions directory: netlify/functions

    點擊「Deploy site」

--------------------------------------------------------------------------------

【步驟 4】設定環境變數

    1. 進入你的網站 Dashboard
    2. 點擊「Site settings」
    3. 左側選單點「Environment variables」
    4. 點擊「Add a variable」

    ▼ 新增 OpenAI API Key：
       Key：OPENAI_API_KEY
       Value：你的 OpenAI API 金鑰
       點擊「Create variable」

    ▼ 新增 Google API Key：
       再次點擊「Add a variable」
       Key：GOOGLE_API_KEY
       Value：你的 Google API 金鑰
       點擊「Create variable」

    注意：兩個都要設定，才能在前端切換不同的 AI 模型

--------------------------------------------------------------------------------

【步驟 5】重新部署

    1. 回到「Deploys」頁面
    2. 點擊「Trigger deploy」→「Deploy site」
    3. 等待部署完成

================================================================================
常見問題排解
================================================================================

【問題】聊天功能回傳錯誤

    可能原因：
    1. OPENAI_API_KEY 沒有設定或設定錯誤
       → 檢查環境變數是否正確設定

    2. OpenAI 帳號沒有餘額
       → 前往 https://platform.openai.com/usage 查看

    3. API Key 已過期或被撤銷
       → 重新產生一個新的 Key

--------------------------------------------------------------------------------

【問題】部署失敗，顯示 Python 相關錯誤

    可能原因：
    1. requirements.txt 不在正確位置
       → 確認 requirements.txt 在 netlify/functions/ 資料夾內

    2. Python 套件版本不相容
       → 嘗試在 requirements.txt 指定版本，例如：openai==1.0.0

--------------------------------------------------------------------------------

【問題】網頁可以開啟但聊天沒反應

    可能原因：
    1. 瀏覽器 Console 有錯誤
       → 按 F12 開啟開發者工具，查看 Console 和 Network 分頁

    2. API 路徑錯誤
       → 確認 netlify.toml 的 redirects 設定正確

================================================================================
專案結構說明
================================================================================

netlify/
├── index.html                    # 前端網頁（聊天介面）
├── netlify.toml                  # Netlify 設定檔
└── netlify/
    └── functions/
        ├── chat.py               # 後端 API（處理聊天請求）
        └── requirements.txt      # Python 套件依賴

================================================================================
