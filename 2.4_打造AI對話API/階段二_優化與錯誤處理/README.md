# 2.4 打造 AI 對話 API - 階段二：優化與錯誤處理

## 學習目標
- 使用 try-except 處理錯誤
- 測試各種錯誤情況
- 回傳適當的 HTTP 狀態碼

## 與階段一的差異
- 加入 `try-except` 結構捕捉錯誤
- 錯誤時回傳 `success: False` 和錯誤訊息
- 回傳適當的 HTTP 狀態碼（400、500）

## 測試錯誤處理

```bash
# 啟動應用
python app.py

# 在另一個終端執行測試腳本
python test_error_handling.py
```

## 測試情境

| 測試 | 預期結果 |
|------|---------|
| 正常訊息 | 狀態碼 200，回傳 AI 回應 |
| 空訊息 | 狀態碼 400，回傳「訊息不能是空的」 |
| 缺少 message | 狀態碼 400，回傳「訊息不能是空的」 |
| API Key 錯誤 | 狀態碼 500，回傳錯誤訊息 |
